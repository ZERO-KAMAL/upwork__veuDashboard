{"remainingRequest":"C:\\Users\\Kamal\\Desktop\\upwork\\zafar sir\\frontend_insurance\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Kamal\\Desktop\\upwork\\zafar sir\\frontend_insurance\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Kamal\\Desktop\\upwork\\zafar sir\\frontend_insurance\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Kamal\\Desktop\\upwork\\zafar sir\\frontend_insurance\\src\\views\\apps\\chat\\ChatLog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Kamal\\Desktop\\upwork\\zafar sir\\frontend_insurance\\src\\views\\apps\\chat\\ChatLog.vue","mtime":1653043180857},{"path":"C:\\Users\\Kamal\\Desktop\\upwork\\zafar sir\\frontend_insurance\\babel.config.js","mtime":1653043180287},{"path":"C:\\Users\\Kamal\\Desktop\\upwork\\zafar sir\\frontend_insurance\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653043258756},{"path":"C:\\Users\\Kamal\\Desktop\\upwork\\zafar sir\\frontend_insurance\\node_modules\\babel-loader\\lib\\index.js","mtime":1653043263838},{"path":"C:\\Users\\Kamal\\Desktop\\upwork\\zafar sir\\frontend_insurance\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653043258756},{"path":"C:\\Users\\Kamal\\Desktop\\upwork\\zafar sir\\frontend_insurance\\node_modules\\vue-loader\\lib\\index.js","mtime":1653043264822}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJzsKaW1wb3J0IHsgQkF2YXRhciB9IGZyb20gJ2Jvb3RzdHJhcC12dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQkF2YXRhcjogQkF2YXRhcgogIH0sCiAgcHJvcHM6IHsKICAgIGNoYXREYXRhOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBwcm9maWxlVXNlckF2YXRhcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMpIHsKICAgIHZhciBmb3JtYXR0ZWRDaGF0RGF0YSA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGNvbnRhY3QgPSB7CiAgICAgICAgaWQ6IHByb3BzLmNoYXREYXRhLmNvbnRhY3QuaWQsCiAgICAgICAgYXZhdGFyOiBwcm9wcy5jaGF0RGF0YS5jb250YWN0LmF2YXRhcgogICAgICB9OwogICAgICB2YXIgY2hhdExvZyA9IFtdOwoKICAgICAgaWYgKHByb3BzLmNoYXREYXRhLmNoYXQpIHsKICAgICAgICBjaGF0TG9nID0gcHJvcHMuY2hhdERhdGEuY2hhdC5jaGF0OwogICAgICB9CgogICAgICB2YXIgZm9ybWF0dGVkQ2hhdExvZyA9IFtdOwogICAgICB2YXIgY2hhdE1lc3NhZ2VTZW5kZXJJZCA9IGNoYXRMb2dbMF0gPyBjaGF0TG9nWzBdLnNlbmRlcklkIDogdW5kZWZpbmVkOwogICAgICB2YXIgbXNnR3JvdXAgPSB7CiAgICAgICAgc2VuZGVyOiBjaGF0TWVzc2FnZVNlbmRlcklkLAogICAgICAgIG1lc3NhZ2VzOiBbXQogICAgICB9OwogICAgICBjaGF0TG9nLmZvckVhY2goZnVuY3Rpb24gKG1zZywgaW5kZXgpIHsKICAgICAgICBpZiAoY2hhdE1lc3NhZ2VTZW5kZXJJZCA9PT0gbXNnLnNlbmRlcklkKSB7CiAgICAgICAgICBtc2dHcm91cC5tZXNzYWdlcy5wdXNoKHsKICAgICAgICAgICAgbXNnOiBtc2cubWVzc2FnZSwKICAgICAgICAgICAgdGltZTogbXNnLnRpbWUKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjaGF0TWVzc2FnZVNlbmRlcklkID0gbXNnLnNlbmRlcklkOwogICAgICAgICAgZm9ybWF0dGVkQ2hhdExvZy5wdXNoKG1zZ0dyb3VwKTsKICAgICAgICAgIG1zZ0dyb3VwID0gewogICAgICAgICAgICBzZW5kZXJJZDogbXNnLnNlbmRlcklkLAogICAgICAgICAgICBtZXNzYWdlczogW3sKICAgICAgICAgICAgICBtc2c6IG1zZy5tZXNzYWdlLAogICAgICAgICAgICAgIHRpbWU6IG1zZy50aW1lCiAgICAgICAgICAgIH1dCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgaWYgKGluZGV4ID09PSBjaGF0TG9nLmxlbmd0aCAtIDEpIGZvcm1hdHRlZENoYXRMb2cucHVzaChtc2dHcm91cCk7CiAgICAgIH0pOwogICAgICByZXR1cm4gewogICAgICAgIGZvcm1hdHRlZENoYXRMb2c6IGZvcm1hdHRlZENoYXRMb2csCiAgICAgICAgY29udGFjdDogY29udGFjdCwKICAgICAgICBwcm9maWxlVXNlckF2YXRhcjogcHJvcHMucHJvZmlsZVVzZXJBdmF0YXIKICAgICAgfTsKICAgIH0pOwogICAgcmV0dXJuIHsKICAgICAgZm9ybWF0dGVkQ2hhdERhdGE6IGZvcm1hdHRlZENoYXREYXRhCiAgICB9OwogIH0KfTs="},{"version":3,"sources":["ChatLog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,SAAA,QAAA,QAAA,sBAAA;AACA,SAAA,OAAA,QAAA,eAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA;AADA,GADA;AAIA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,iBAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AALA,GAJA;AAcA,EAAA,KAdA,iBAcA,KAdA,EAcA;AACA,QAAA,iBAAA,GAAA,QAAA,CAAA,YAAA;AACA,UAAA,OAAA,GAAA;AACA,QAAA,EAAA,EAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,EADA;AAEA,QAAA,MAAA,EAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA;AAFA,OAAA;AAKA,UAAA,OAAA,GAAA,EAAA;;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,IAAA,EAAA;AACA,QAAA,OAAA,GAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA;;AAEA,UAAA,gBAAA,GAAA,EAAA;AACA,UAAA,mBAAA,GAAA,OAAA,CAAA,CAAA,CAAA,GAAA,OAAA,CAAA,CAAA,CAAA,CAAA,QAAA,GAAA,SAAA;AACA,UAAA,QAAA,GAAA;AACA,QAAA,MAAA,EAAA,mBADA;AAEA,QAAA,QAAA,EAAA;AAFA,OAAA;AAKA,MAAA,OAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA,KAAA,EAAA;AACA,YAAA,mBAAA,KAAA,GAAA,CAAA,QAAA,EAAA;AACA,UAAA,QAAA,CAAA,QAAA,CAAA,IAAA,CAAA;AACA,YAAA,GAAA,EAAA,GAAA,CAAA,OADA;AAEA,YAAA,IAAA,EAAA,GAAA,CAAA;AAFA,WAAA;AAIA,SALA,MAKA;AACA,UAAA,mBAAA,GAAA,GAAA,CAAA,QAAA;AACA,UAAA,gBAAA,CAAA,IAAA,CAAA,QAAA;AACA,UAAA,QAAA,GAAA;AACA,YAAA,QAAA,EAAA,GAAA,CAAA,QADA;AAEA,YAAA,QAAA,EAAA,CAAA;AACA,cAAA,GAAA,EAAA,GAAA,CAAA,OADA;AAEA,cAAA,IAAA,EAAA,GAAA,CAAA;AAFA,aAAA;AAFA,WAAA;AAOA;;AACA,YAAA,KAAA,KAAA,OAAA,CAAA,MAAA,GAAA,CAAA,EAAA,gBAAA,CAAA,IAAA,CAAA,QAAA;AACA,OAlBA;AAoBA,aAAA;AACA,QAAA,gBAAA,EAAA,gBADA;AAEA,QAAA,OAAA,EAAA,OAFA;AAGA,QAAA,iBAAA,EAAA,KAAA,CAAA;AAHA,OAAA;AAKA,KA3CA,CAAA;AA6CA,WAAA;AACA,MAAA,iBAAA,EAAA;AADA,KAAA;AAGA;AA/DA,CAAA","sourcesContent":["<template>\r\n  <div class=\"chats\">\r\n    <div\r\n      v-for=\"(msgGrp, index) in formattedChatData.formattedChatLog\"\r\n      :key=\"msgGrp.senderId+String(index)\"\r\n      class=\"chat\"\r\n      :class=\"{'chat-left': msgGrp.senderId === formattedChatData.contact.id}\"\r\n    >\r\n      <div class=\"chat-avatar\">\r\n        <b-avatar\r\n          size=\"36\"\r\n          class=\"avatar-border-2 box-shadow-1\"\r\n          variant=\"transparent\"\r\n          :src=\"msgGrp.senderId === formattedChatData.contact.id ? formattedChatData.contact.avatar : profileUserAvatar\"\r\n        />\r\n      </div>\r\n      <div class=\"chat-body\">\r\n        <div\r\n          v-for=\"msgData in msgGrp.messages\"\r\n          :key=\"msgData.time\"\r\n          class=\"chat-content\"\r\n        >\r\n          <p>{{ msgData.msg }}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from '@vue/composition-api'\r\nimport { BAvatar } from 'bootstrap-vue'\r\n\r\nexport default {\r\n  components: {\r\n    BAvatar,\r\n  },\r\n  props: {\r\n    chatData: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    profileUserAvatar: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n  setup(props) {\r\n    const formattedChatData = computed(() => {\r\n      const contact = {\r\n        id: props.chatData.contact.id,\r\n        avatar: props.chatData.contact.avatar,\r\n      }\r\n\r\n      let chatLog = []\r\n      if (props.chatData.chat) {\r\n        chatLog = props.chatData.chat.chat\r\n      }\r\n\r\n      const formattedChatLog = []\r\n      let chatMessageSenderId = chatLog[0] ? chatLog[0].senderId : undefined\r\n      let msgGroup = {\r\n        sender: chatMessageSenderId,\r\n        messages: [],\r\n      }\r\n\r\n      chatLog.forEach((msg, index) => {\r\n        if (chatMessageSenderId === msg.senderId) {\r\n          msgGroup.messages.push({\r\n            msg: msg.message,\r\n            time: msg.time,\r\n          })\r\n        } else {\r\n          chatMessageSenderId = msg.senderId\r\n          formattedChatLog.push(msgGroup)\r\n          msgGroup = {\r\n            senderId: msg.senderId,\r\n            messages: [{\r\n              msg: msg.message,\r\n              time: msg.time,\r\n            }],\r\n          }\r\n        }\r\n        if (index === chatLog.length - 1) formattedChatLog.push(msgGroup)\r\n      })\r\n\r\n      return {\r\n        formattedChatLog,\r\n        contact,\r\n        profileUserAvatar: props.profileUserAvatar,\r\n      }\r\n    })\r\n\r\n    return {\r\n      formattedChatData,\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"],"sourceRoot":"src/views/apps/chat"}]}